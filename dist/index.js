"use strict";(()=>{window.Webflow||(window.Webflow=[]);window.Webflow.push(()=>{let Se="https://cdn.prod.website-files.com/66aadbd497db3d8c63799460/66eb5ac454e950633d646ea2_testlogo.jpg",F={},Mt={Branco:"B",Inox:"I",Bronze:"BZ",Preto:"P",Nogueira:"N",Chumbo:"CH"},S={estores:{width:[80,90,100,110,120,130,140,150,160,170,180,190,200,210,220,230,240,250,260,270,280,290,300],height:[80,100,120,140,160,180,200,220,240,260,280,300,320]},calhas:{"5000-B":[120,140,160,180,200,220,240,260,300,320,340,360,400,440,500,600],"5000-I":[120,140,160,180,200,220,240,260,300,320,340,360,400,440,500,600],"5000-BZ":[120,140,160,180,200,220,240,260,300,320,340,360,400,440,500,600],"5000-P":[120,140,160,180,200,220,240,260,300,320,340,360,400,440,500,600],"5000-N":[120,140,160,180,200,220,240,260,300,320,340,360,400,440,500,600],"5000-CH":[120,140,160,180,200,220,240,260,300,350,400,450,500],"1500-B":[120,140,160,180,200,220,240,260,300,320,340,360,400,440,500,600],"1500-I":[120,140,160,180,200,220,240,260,300,320,340,360,400,440,500,600],"1500-BZ":[120,140,160,180,200,220,240,260,300,320,340,360,400,440,500,600],"1500-P":[120,140,160,180,200,220,240,260,300,320,340,360,400,440,500,600],"1500-N":[120,140,160,180,200,220,240,260,300,320,340,360,400,440,500,600],"1500-CH":[120,140,160,180,200,220,240,260,300,350,400,450,500],"9500M":[150,200,250,300,350,400,450,500,600,650,700,750,800,850,900,1e3,1200],KS:[160,200,240,300,400,500,600],"DSXL-B":[160,200,240,300,400,600],"DSXL-CZ":[160,200,240,300,400,600],"DSXL-P":[160,200,240,300,400,600]}},J=[],h=[],p="inicio",n={inicio:"",tecido:"",tipo:"",bainha:"",medidas:"",correcao:"",calha:"",suporte:"",instalacao:"",nome:"",email:"",contacto:""},f={usedWidths:[{name:"Franzido",widthRatio:2.5},{name:"Ondas",widthRatio:2.7},{name:"Macho Juntos",widthRatio:3},{name:"Pregas",widthRatio:2.5}],manufacturingPrices:[{name:"Franzido",blackout:9,normal:8},{name:"Ondas",blackout:8.5,normal:7.5},{name:"Macho Juntos",normal:13.5,blackout:13.5,alinhado:12.5},{name:"Pregas",normal:13.5,blackout:13.5,alinhado:12.5}],bainhaPrice:{price:3.5,widthMargin:20},uniao:{maxLength:400,price:8.6,calha9500M:15},prolongadores:3.7,roletesPrice:5,minWindowWidthEstores:80,maxWindowWidthEstores:300,minWindowHeightEstores:80,maxWindowHeightEstores:300,maxWindowWidth:650,maxWindowHeight:280,maxCalhaWidth:600,measuresCheckPrice:30,instalation:[{maxWidth:300,price:35},{maxWidth:400,price:40},{maxWidth:500,price:45},{maxWidth:600,price:50},{maxWidth:650,price:55}]},B=!0,de=document.getElementById("sim-container"),K=document.getElementById("steps-cortina"),G=document.getElementById("steps-estore"),u={step1:document.getElementById("simulator-heading-1"),step1i:document.getElementById("inicio-description"),step1c:document.getElementById("inicio-description-c"),step1e:document.getElementById("inicio-description-e"),step2:document.getElementById("simulator-heading-2"),step3:document.getElementById("simulator-heading-3"),step4:document.getElementById("simulator-heading-4"),step5:document.getElementById("simulator-heading-5")},i={inicio:document.getElementById("inicio-selector"),tecido:document.getElementById("tecido-selector"),tipo:document.getElementById("tipo-selector"),bainha:document.getElementById("bainha-selector"),medidas:document.getElementById("medidas-selector"),correcao:document.getElementById("correcao-selector"),suporte:document.getElementById("suporte-selector"),instalacao:document.getElementById("instalacao-selector")},ue=document.getElementById("largura-input-descr-c"),me=document.getElementById("altura-input-descr-c"),he=document.getElementById("largura-input-descr-e"),pe=document.getElementById("altura-input-descr-e"),C=document.getElementById("largura-input"),b=document.getElementById("altura-input"),X=document.querySelector("#correcao-switch"),z=document.querySelector("#bainha"),M=document.getElementById("tecto-radio-btn"),N=document.getElementById("parede-radio-btn"),V=document.querySelector("#instalacao-switch"),Q=document.getElementById("largura-min-error-estore"),Y=document.getElementById("altura-min-error-estore"),w=document.getElementById("largura-max-error-estore"),ee=document.getElementById("altura-max-error-estore"),te=document.getElementById("largura-error"),ae=document.getElementById("altura-error"),R=document.getElementById("seguinte-btn"),r={tecido:document.getElementById("step-tecido"),tipo:document.getElementById("step-tipo"),medidas:document.getElementById("step-medidas"),calha:document.getElementById("step-calha"),instalacao:document.getElementById("step-instalacao"),medidasEstore:document.getElementById("step-medidas-estore"),instalacaoEstore:document.getElementById("step-instalacao-estore")},fe=document.getElementById("form"),oe=document.getElementById("nome-input"),se=document.getElementById("email-input"),$e=document.getElementById("contacto-switch"),Ee=document.getElementById("checkout-container"),Ne=document.getElementById("new-window-contain"),Fe=document.getElementById("checkout-input-contain"),ge=document.getElementById("checkout-info-estore"),ye=document.getElementById("checkout-info-cortina"),Oe=document.getElementById("new-window-btn"),Ae=document.getElementById("no-window-btn"),Te=document.getElementById("enviar-btn"),I={tecido:document.getElementById("checkout-tecido"),tipo:document.getElementById("checkout-tipo"),bainha:document.getElementById("checkout-bainha"),largura:document.getElementById("checkout-largura"),altura:document.getElementById("checkout-altura"),correcao:document.getElementById("checkout-correcao"),calha:document.getElementById("checkout-calha"),suporte:document.getElementById("checkout-suporte"),instalacao:document.getElementById("checkout-instalacao"),estoreProduto:document.getElementById("checkout-produto-estore"),estoreLargura:document.getElementById("checkout-largura-estore"),estoreAltura:document.getElementById("checkout-altura-estore"),estoreCorrecao:document.getElementById("checkout-correcao-estore"),estoreInstalacao:document.getElementById("checkout-instalacao-estore")},Vt=document.getElementById("feedback-div"),q=document.getElementById("name-error"),T=document.getElementById("email-error"),Ce=document.getElementById("contacto-switch-error"),_e=document.getElementById("cortina-radio-btn"),De=document.getElementById("estore-radio-btn"),Xe=document.getElementById("calha-radio-btn"),Me=()=>{Bt(),lt(),dt(),mt(),ht(),Et(),gt(),ut(),bt(),vt(),xt(),Ct(),yt(),ft(),pt()},Ve=()=>{He(),Me()},Re=e=>{let t=0,a=0,c="",o=e.tecido.split("-"),l=o[0],d=o[1],m=e.calha?e.calha.split("-"):null,y=m?m[0]:null,P=m?m[1]:null,L=e.medidas?e.medidas.split(" X ")[0]:0;if(e.inicio==="Cortina"&&(c=`${l}${d}`),e.inicio==="Estore"){let le=e.medidas?e.medidas.split(" X ")[1]:0;c=Ue(l,d,L,le)}if(t=typeof F[c].price=="string"?parseFloat(F[c].price):F[c].price,e.inicio==="Estore")return{product:t,calha:0};let x=(L/f.maxCalhaWidth|0)+1,H=L<=f.maxCalhaWidth?L:L/x,A=Ze(y,e.tipo,P,H,e?.suporte==="Parede");return a=F[A]?L<f.maxCalhaWidth?F[A].price:F[A].price*x:0,a+=L>f.maxCalhaWidth?f.prolongadores*x:L>f.uniao.maxLength&&e.calha.startsWith("9500M")?f.uniao.calha9500M*x:L>f.uniao.maxLength?f.uniao.price*x:0,(A.startsWith("5000")||A.startsWith("1500"))&&(a+=L<f.maxCalhaWidth?f.roletesPrice:f.roletesPrice*x),{product:t,calha:a}},He=()=>{fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vSCprbghTI2dhOxsCMkcEHhI-DE5pOb5RnOKO3KPd5-ntAORtuPTuFonSvs9s4-ANy_VCezuEdcZ8pg/pub?gid=0&single=true&output=csv").then(e=>e.text()).then(e=>{let t=e.trim().split(`
`),a=t[0].split(","),c=t.slice(1).map(l=>l.split(",")),o={};c.forEach(l=>{let[d,m]=l;o[d]||(o[d]={id:d,price:parseFloat(m)})}),F=o}).catch(e=>console.error("Error fetching CSV data:",e))},E=(e,t)=>{n[e.id.split("-")[0]]=t},ie=e=>{n.calha=e},be=e=>{n.suporte=N.checked?"Parede":"Tecto"},ze=()=>{n.inicio="",n.tecido="",n.tipo="",n.bainha="",n.medidas="",n.correcao="",n.calha="",n.suporte="",n.instalacao=""},qe=e=>{e.inicio==="Cortina"&&(E(i.inicio,"Cortina"),E(i.tecido,e.tecido),E(i.tipo,e.tipo),E(i.bainha,e.bainha),E(i.medidas,e.medidas),E(i.correcao,e.correcao),E(i.suporte,e.suporte),E(i.instalacao,e.instalacao)),e.inicio==="Estore"&&(E(i.inicio,"Estore"),E(i.tecido,e.tecido),E(i.medidas,e.medidas),E(i.correcao,e.correcao),E(i.instalacao,e.instalacao))},ce=()=>{let e={inicio:n.inicio,bainha:n.bainha,tecido:n.tecido,tipo:n.tipo,medidas:n.medidas,correcao:n.correcao,calha:n.calha,suporte:n.suporte,instalacao:n.instalacao};h.push(e),B=!1},je=()=>{O("Cortina"),ze(),Ge(),ke("inicio"),B=!0},v=()=>{switch(p){case"inicio":return n.inicio===""?(alert("Por favor selecione um valor"),!1):!0;case"tecido":return n.tecido===""?(alert("Por favor selecione um valor"),!1):!0;case"tipo":return n.tipo===""?(alert("Por favor selecione um valor"),!1):!0;case"medidas":if(C?.value===""||b?.value==="")return alert("Preencha valores v\xE1lidos de largura e altura"),g(!1),!1;if(n.inicio==="Cortina"&&(parseInt(C?.value)>f.maxWindowWidth||parseInt(b?.value)>f.maxWindowHeight))return parseInt(C?.value)>f.maxWindowWidth?te.style.display="block":te.style.display="none",parseInt(b?.value)>f.maxWindowHeight?ae.style.display="block":ae.style.display="none",g(!1),!1;if(n.inicio==="Estore"){if(parseInt(C?.value)<f.minWindowWidthEstores||parseInt(b?.value)<f.minWindowHeightEstores)return parseInt(C?.value)<f.minWindowWidthEstores?Q.style.display="block":Q.style.display="none",parseInt(b?.value)<f.minWindowHeightEstores?Y.style.display="block":Y.style.display="none",g(!1),!1;if(parseInt(C?.value)>f.maxWindowWidthEstores||parseInt(b?.value)>f.maxWindowHeightEstores)return parseInt(C?.value)>f.maxWindowWidthEstores?w.style.display="block":w.style.display="none",parseInt(b?.value)>f.maxWindowHeightEstores?ee.style.display="block":ee.style.display="none",g(!1),!1}return te.style.display="none",ae.style.display="none",Q.style.display="none",Y.style.display="none",w.style.display="none",ee.style.display="none",!0;case"calha":return n.calha===""?(alert("Por favor selecione um valor"),!1):!0;case"suporte":return n.suporte===""?(alert("Por favor selecione um valor"),!1):!0}return!0},Ue=(e,t,a,c)=>{let o=S.estores.width.find(d=>d>=a),l=S.estores.height.find(d=>d>=c);return`${e}${l}${o}`},Ze=(e,t,a,c,o)=>{if(e==="KS"){if(o){let m=S.calhas[e]?.find(y=>y>=c);return`${e}${t==="Franzido"?"F":"O"}${m}SP`}let d=S.calhas[e]?.find(m=>m>=c);return`${e}${t==="Franzido"?"F":"O"}${d}`}if(e==="DSXL"){if(o){let m=S.calhas[`${e}-${a}`]?.find(y=>y>=c);return`${e}${t==="Franzido"?"F":"O"}${m}${a}SP`}let d=S.calhas[`${e}-${a}`]?.find(m=>m>=c);return`${e}${t==="Franzido"?"F":"O"}${d}${a}`}if(e==="9500M"){if(o){let m=S.calhas[e].find(y=>y>=c);return`${e}${m}SP`}let d=S.calhas[e].find(m=>m>=c);return`${e}${d}`}if(o){let d=S.calhas[`${e}-${a}`].find(m=>m>=c);return`${e}${d}${a}SP`}let l=S.calhas[`${e}-${a}`].find(d=>d>=c);return`${e}${l}${a}`},Je=e=>{let t=e.getElementsByClassName("color_name");return t.length>0?t[0].textContent:null},ve=e=>{let t=e.getElementsByClassName("product_name");return t.length>0?t[0].textContent:null},Ke=e=>{switch(e){case"tecido":case"inicio":return"step1";case"tipo":case"bainha":return"step2";case"medidas":case"correcao":return"step3";case"calha":return"step4";case"instalacao":return"step5"}},O=e=>{e==="Estore"&&De?.click(),e==="Cortina"&&_e?.click(),e==="Calha"&&Xe?.click()},Ge=()=>{let e=document.querySelectorAll("[id^='inicio-card']"),t=document.querySelectorAll("[id^='tipo-card']"),a=document.querySelectorAll("[id^='tecido-card']"),c=document.querySelectorAll(".tecido_color");e.forEach(o=>{$(o)}),t.forEach(o=>{$(o)}),a.forEach(o=>{$(o)}),c.forEach(o=>{re(o)}),C.value="",b.value="",X.checked=!1,V.checked=!1,N?.click(),z.checked=!1},xe=e=>{document.querySelectorAll("[id^='inicio-card']").forEach(a=>{a.getElementsByTagName("h1")[0].textContent===e?D(a):$(a)})},Be=e=>{document.querySelectorAll("[id^='tecido-card']").forEach(a=>{ve(a).startsWith(e)?D(a):$(a)})},Qe=e=>{document.querySelectorAll("[id^='tipo-card']").forEach(a=>{a.getElementsByTagName("h1")[0].textContent===e?D(a):$(a)})},Ye=e=>{e==="Parede"?N.click():M.click()},we=()=>{M.checked=!1,N.checked=!1},j=()=>{let e=document.querySelector("#checkout-window-btn"),t=document.getElementById("window-btns-container");if(h.length===1&&(h[0].button=e,Pe(h[0])),h.length>1&&e){let a=e.cloneNode(!0);a.querySelector("h6").textContent=`Janela ${h.length}`,h[h.length-1].button=a,Pe(h[h.length-1]),t?.appendChild(a)}},et=e=>{e.inicio==="Cortina"&&(xe(e.inicio),Be(e.tecido),Qe(e.tipo),z.checked=e.bainha,C.value=e.medidas.split(" X ")[0],b.value=e.medidas.split(" X ")[1],X.checked=e.correcao,Ye(e.suporte),V.checked=e.instalacao),e.inicio==="Estore"&&(xe(e.inicio),Be(e.tecido),C.value=e.medidas.split(" X ")[0],b.value=e.medidas.split(" X ")[1],X.checked=e.correcao,V.checked=e.instalacao)},U=e=>{e==="inicio"&&(u.step1i.style.display="flex",u.step1c.style.display="none",u.step1e.style.display="none"),e==="tecido"&&n.inicio==="Cortina"&&(u.step1i.style.display="none",u.step1c.style.display="flex",u.step1e.style.display="none"),e==="tecido"&&n.inicio==="Estore"&&(u.step1i.style.display="none",u.step1c.style.display="none",u.step1e.style.display="flex")},tt=e=>{if((e==="largura"||e==="altura")&&(e="medidas"),e!==p&&r[e].classList.contains("done")){switch(rt(p),s(u[Ke(p)],!1),s(p==="calha"?i.tecido:i[p],!1),U(e),e){case"tecido":s(u.step1,!0),s(i.tecido,!0);break;case"tipo":s(u.step2,!0),s(i.tipo,!0);break;case"medidas":s(u.step3,!0),s(i.medidas,!0);break;case"calha":s(u.step4,!0),s(i.tecido,!0);break;case"instalacao":s(u.step5,!0),s(i.instalacao,!0);break}p=e,W(e)}},at=()=>{n.inicio==="Cortina"&&(ue.style.display="block",me.style.display="block",he.style.display="none",pe.style.display="none"),n.inicio==="Estore"&&(ue.style.display="none",me.style.display="none",he.style.display="block",pe.style.display="block")},ot=()=>{if(n.inicio==="Cortina")switch(p){case"inicio":v()&&(_("Cortina"),s(i.inicio,!1),U("tecido"),B&&g(!1),s(i.tecido,!0),p="tecido");break;case"tecido":v()&&(U("tecido"),k("tecido"),W("tipo"),s(u.step1,!1),B&&g(!1),s(i.tecido,!1),s(u.step2,!0),s(i.tipo,!0),p="tipo");break;case"tipo":v()&&(s(i.tipo,!1),n.tecido.startsWith("120")||n.tecido.startsWith("122")?(E(i.bainha,!0),B&&g(!1),k("tipo"),W("medidas"),s(u.step2,!1),s(u.step3,!0),s(i.medidas,!0),p="medidas"):(s(i.bainha,!0),p="bainha"));break;case"bainha":E(i.bainha,`${n.tecido.startsWith("120")||n.tecido.startsWith("122")?!0:n.bainha?n.bainha:!1}`),k("tipo"),W("medidas"),s(u.step2,!1),s(i.bainha,!1),B&&g(!1),s(u.step3,!0),s(i.medidas,!0),p="medidas";break;case"medidas":v()&&(E(i.medidas,`${C?.value} X ${b?.value}`),s(i.medidas,!1),h.length>0?(B&&g(!1),O("Calha"),k("medidas"),W("calha"),s(u.step3,!1),s(u.step4,!0),s(i.tecido,!0),p="calha"):(s(i.correcao,!0),p="correcao"));break;case"correcao":O("Calha"),k("medidas"),W("calha"),s(u.step3,!1),s(i.correcao,!1),B&&g(!1),s(u.step4,!0),s(i.tecido,!0),p="calha";break;case"calha":v()&&(s(i.tecido,!1),B&&g(!1),we(),s(i.suporte,!0),p="suporte");break;case"suporte":E(i.suporte,N?.checked?"Parede":"Tecto"),v()&&(k("calha"),W("instalacao"),s(u.step4,!1),s(i.suporte,!1),h.length>0?(B&&(ce(),j()),Z()):(s(u.step5,!0),s(i.instalacao,!0),p="instalacao"));break;case"instalacao":k("instalacao"),s(u.step5,!1),s(i.instalacao,!1),B&&(ce(),j()),Z();break}else switch(p){case"inicio":v()&&(_("Estore"),s(i.inicio,!1),U("tecido"),B&&g(!1),s(i.tecido,!0),p="tecido");break;case"tecido":v()&&(k("tecido"),W("medidas"),s(u.step1,!1),s(i.tecido,!1),at(),B&&g(!1),s(u.step3,!0),s(i.medidas,!0),p="medidas");break;case"medidas":v()&&(s(i.medidas,!1),h.length>0?(k("medidas"),W("instalacao"),s(u.step3,!1),s(u.step5,!0),s(i.instalacao,!0),p="instalacao"):(s(i.correcao,!0),p="correcao"));break;case"correcao":k("medidas"),W("instalacao"),s(u.step3,!1),s(i.correcao,!1),h.length>0?(j(),Z()):(s(u.step5,!0),s(i.instalacao,!0),p="instalacao");break;case"instalacao":k("instalacao"),s(u.step5,!1),s(i.instalacao,!1),B&&(ce(),j()),Z();break}},Z=()=>{de.style.display="none",Ie(h[h.length-1]),_(),Ee.style.display="flex"},st=e=>{e.inicio==="Cortina"&&(ge.style.display="none",ye.style.display="flex",I.tecido.textContent=e.tecido,I.tipo.textContent=e.tipo,I.bainha.textContent=e.tipo==="Ondas"||e.tipo==="Franzido"?"Ba\xEDnha de Chumbo inclu\xEDda":e.bainha?"Com Ba\xEDnha de Chumbo":"Sem Ba\xEDnha de Chumbo",I.largura.textContent=e.medidas.split(" X ")[0]+"cm Largura",I.altura.textContent=e.medidas.split(" X ")[1]+"cm Altura",I.correcao.textContent=h[0].correcao?"Com Verifica\xE7\xE3o":"Sem Verifica\xE7\xE3o",I.calha.textContent=e.calha,I.suporte.textContent="Suporte de "+e.suporte,I.instalacao.textContent=h[0].instalacao?"Com Instala\xE7\xE3o":"Sem Instala\xE7\xE3o"),e.inicio==="Estore"&&(ge.style.display="flex",ye.style.display="none",I.estoreProduto.textContent=e.tecido,I.estoreLargura.textContent=e.medidas.split(" X ")[0]+"cm",I.estoreAltura.textContent=e.medidas.split(" X ")[1]+"cm",I.estoreCorrecao.textContent=h[0].correcao?"Com Verifica\xE7\xE3o":"Sem Verifica\xE7\xE3o",I.estoreInstalacao.textContent=h[0].instalacao?"Com Instala\xE7\xE3o":"Sem Instala\xE7\xE3o")},Ie=e=>{h.forEach(t=>{t.button&&t.button.classList.remove("active")}),e.button.classList.add("active"),st(e),et(e),qe(e)},ke=e=>{Ee.style.display="none",nt(),_(),de.style.display="flex";let t=!1;switch((e==="estoreLargura"||e==="estoreAltura"||e==="estoreCorrecao"||e==="estoreInstalacao"||e==="estoreProduto")&&(t=!0),(e==="largura"||e==="altura"||e==="estoreLargura"||e==="estoreAltura")&&(e="medidas"),e==="estoreCorrecao"&&(e="correcao"),e==="estoreInstalacao"&&(e="instalacao"),e==="estoreProduto"&&(e="tecido"),_(t?"Estore":"Cortina"),e){case"inicio":s(u.step1,!0),s(i.inicio,!0);break;case"tecido":O(t?"Estore":"Cortina"),s(u.step1,!0),s(i.tecido,!0);break;case"tipo":s(u.step2,!0),s(i.tipo,!0);break;case"medidas":s(u.step3,!0),s(i.medidas,!0);break;case"calha":O("Calha"),s(u.step4,!0),s(i.tecido,!0);break;case"instalacao":s(u.step5,!0),s(i.instalacao,!0);break}if(p=e,p==="inicio")return W("tecido");B=!1},Rt=async e=>{let t=Buffer.from(e,"base64"),c=await(await PDFDocument.load(t)).save();return Buffer.from(c).toString("base64")},Ht=async e=>await(await fetch(e)).arrayBuffer(),it=async()=>{let{jsPDF:e}=window.jspdf,t=new e,a=10,c=190,o=25,l=6,d=0;t.setFontSize(10);let m=40,y=7,P=(t.internal.pageSize.width-m)/2,L=null;try{L=await ct(Se)}catch(x){console.error(x)}return t.setFont("helvetica","bold"),t.text("Data:",c-40,o),t.setFont("helvetica","normal"),t.text(new Date().toLocaleDateString(),c-40+t.getTextWidth("Data: "),o),t.setFont("helvetica","bold"),t.text("Cliente:",a,o),t.setFont("helvetica","normal"),t.text(n.nome,a+t.getTextWidth("Cliente:  "),o),o+=l,t.setFont("helvetica","bold"),t.text("Email:",a,o),t.setFont("helvetica","normal"),t.text(n.email,a+t.getTextWidth("Email:  "),o),o+=25,h.forEach((x,H)=>{H%5===0&&H!==0&&(t.addPage(),o=25),t.setFontSize(10);let{usedWidth:A,productPrice:le,manufacturingPrice:At,bainhaPrice:Tt,calhaPrice:_t,instalationPrice:Dt,windowTotal:Le}=St(x);d+=Le,t.setFont("helvetica","bold");let Xt=`Janela ${H+1} - ${x.medidas} CM - (Largura Utilizada: ${parseInt(parseFloat(A).toFixed(2))} CM)`;t.text(Xt,a,o),t.text(`${Le.toFixed(2)}\u20AC`,a+150,o),o+=l,[{label:`Tecido: ${x.tecido}`,price:le},{label:`Tipo de Cortina: ${x.tipo}`,price:At},{label:`Ba\xEDnha de Chumbo: ${x.tecido.startsWith("120")||x.tecido.startsWith("122")?"Inclu\xEDda":x.bainha?"Sim":"N\xE3o"}`,price:Tt},{label:`Calha: ${x.calha} - Suporte: Suporte de ${x.suporte}`,price:_t},{label:`Instala\xE7\xE3o: ${h[0].instalacao?"Sim":"N\xE3o"}`,price:Dt}].forEach(We=>{t.setFontSize(8),t.setFont("helvetica","normal"),t.text(`  - ${We.label}`,a+5,o),t.text(`${We.price.toFixed(2)}\u20AC`,a+150,o),o+=l}),o+=l}),t.setFont("helvetica","bold"),t.setFontSize(10),t.text(`Corre\xE7\xE3o: ${h[0].correcao?"Com corre\xE7\xE3o de medidas":"Medidas facultadas pelo cliente"}`,a,o),t.text(`${h[0].correcao?30:0}\u20AC`,a+150,o),o+=l,o+=l,d+=h[0].correcao?30:0,t.setFontSize(12),t.setFont("helvetica","bold"),t.setFillColor(240,240,240),t.rect(a,o-1,190,l+2,"F"),t.text("Total:",a+120,o+l-3),t.text(`${d.toFixed(2)}\u20AC`,a+150,o+l-2),t.setFontSize(8),t.setFont("helvetica","normal"),o+=l*4,t.text("Valores com IVA incluido a taxa em vigor. Or\xE7amento valido por 15 dias",a,o),o+=l,t.text("Calhas j\xE1 incluem os rodizios e suportes necess\xE1rias para as medidas seleccionadas.",a,o),o+=l,t.text("Valor referente \xE0 instala\xE7\xE3o e Rectifica\xE7\xE3o de Medidas & Instala\xE7\xE3o sujeito a valida\xE7\xE3o do c\xF3digo postal.",a,o),o+=l,t.text("IBAN: PT50 0000 0000 0000 0000 0",a,o),t.save("Orcamento_Fabric-Store.pdf"),t.output("blob",{filename:"Orcamento_Fabric-Store.pdf"})},ct=e=>new Promise((t,a)=>{let c=new Image;c.crossOrigin="Anonymous",c.src=e,c.onload=()=>{let o=document.createElement("canvas");o.width=c.width,o.height=c.height,o.getContext("2d").drawImage(c,0,0);let d=o.toDataURL("image/png");t(d)},c.onerror=o=>{a(new Error(`Failed to load image from ${e}: ${o.message}`))}}),zt=e=>{e.classList.add("show"),gsap.fromTo(e,{opacity:0},{opacity:1,duration:1,ease:"power1.in"})},_=e=>{e||(K.style.display="none",G.style.display="none"),e==="Cortina"&&(K.style.display="flex",G.style.display="none"),e==="Estore"&&(K.style.display="none",G.style.display="flex")},s=(e,t)=>{e.style.display=t?"flex":"none"},nt=()=>{Object.keys(r).forEach(e=>{r[e].classList.remove("active"),r[e].classList.add("next"),r[e].classList.remove("done"),r[e].getElementsByClassName("step_number")[0].classList.remove("active"),r[e].getElementsByClassName("step_description")[0].textContent="Escolha"})},k=e=>{r[e].classList.remove("active"),r[e].classList.remove("next"),r[e].classList.add("done"),r[e].getElementsByClassName("step_number")[0].classList.remove("active"),r[e].getElementsByClassName("step_description")[0].classList.contains("next")&&r[e].getElementsByClassName("step_description")[0].classList.remove("next"),r[e].getElementsByClassName("step_description")[0].textContent=n[e],e==="instala\xE7\xE3o"&&(r.instalacaoEstore?.classList.remove("active"),r.instalacaoEstore?.classList.remove("next"),r.instalacaoEstore?.classList.add("done"),r.instalacaoEstore?.getElementsByClassName("step_number")[0].classList.remove("active"),r.instalacaoEstore.getElementsByClassName("step_description")[0].textContent=n.instalacao?"c/Instala\xE7\xE3o":"s/Instala\xE7\xE3o"),e==="medidas"&&(h.length>0?r[e].getElementsByClassName("step_description")[0].innerHTML+=h[0].correcao?"<br>c/Verifica\xE7\xE3o":"<br>s/Verifica\xE7\xE3o":r[e].getElementsByClassName("step_description")[0].innerHTML+=n.correcao?"<br>c/Verifica\xE7\xE3o":"<br>s/Verifica\xE7\xE3o",r.medidasEstore?.classList.remove("active"),r.medidasEstore?.classList.remove("next"),r.medidasEstore?.classList.add("done"),r.medidasEstore?.getElementsByClassName("step_number")[0].classList.remove("active"),r.medidasEstore.getElementsByClassName("step_description")[0].textContent=`${C?.value} X ${b?.value}cm`,r.medidasEstore.getElementsByClassName("step_description")[0].innerHTML+=`${n.correcao?"<br>c/Verifica\xE7\xE3o":"<br>s/Verifica\xE7\xE3o"}`),e==="tipo"&&(r[e].getElementsByClassName("step_description")[0].innerHTML+=`${n.bainha?"<br>c/Ba\xEDnha de Chumbo":"<br>s/Ba\xEDnha de Chumbo"}`)},W=e=>{r[e].classList.remove("next"),r[e].classList.add("active"),r[e].getElementsByClassName("step_number")[0].classList.add("active"),e==="instalacao"&&(r.instalacaoEstore?.classList.remove("next"),r.instalacaoEstore?.classList.add("active"),r.instalacaoEstore?.getElementsByClassName("step_number")[0].classList.add("active")),e==="medidas"&&(r.medidasEstore?.classList.remove("next"),r.medidasEstore?.classList.add("active"),r.medidasEstore?.getElementsByClassName("step_number")[0].classList.add("active"))},rt=e=>{if(r[e].classList.contains("active")&&(r[e].classList.remove("active"),r[e].getElementsByClassName("step_number")[0].classList.remove("active")),e==="instalacao"&&(r.instalacaoEstore?.classList.remove("active"),r.instalacaoEstore?.getElementsByClassName("step_number")[0].classList.remove("active")),e==="medidas"&&(r.medidasEstore?.classList.remove("active"),r.medidasEstore?.getElementsByClassName("step_number")[0].classList.remove("active")),!B)return k(e);r[e].classList.add("next"),r[e].getElementsByTagName("p")[0].classList.contains("next")||r[e].getElementsByTagName("p")[0].classList.add("next"),e==="instalacao"&&r.instalacaoEstore?.classList.add("next"),e==="medidas"&&r.medidasEstore?.classList.add("next")},g=e=>{e&&R?.classList.contains("inactive")&&R.classList.remove("inactive"),e||R?.classList.contains("inactive")||R.classList.add("inactive")},ne=e=>{e.classList.add("active")},re=e=>{e.classList.remove("active")},D=e=>{let t=e.getElementsByTagName("h1")[0],a=e.getElementsByClassName("tecido_image_contain")[0];e.classList.add("selected"),t.classList.add("active"),a.classList.add("active")},$=e=>{let t=e.getElementsByTagName("h1")[0],a=e.getElementsByClassName("tecido_image_contain")[0];e.classList.remove("selected"),t.classList.remove("active"),a.classList.remove("active")},lt=()=>{let e=document.querySelectorAll("[id^='inicio-card']");e.forEach(t=>{t.addEventListener("click",()=>{let a=t.getElementsByTagName("h1")[0].textContent;D(t,i.inicio),e.forEach(c=>{c!==t&&$(c)}),O(a),E(i.inicio,a),v()&&g(!0)})})},dt=()=>{let e=document.querySelectorAll("[id^='tecido-card']"),t=document.querySelectorAll(".tecido_color");e.forEach(a=>{a.addEventListener("click",()=>{let c=ve(a),o=Je(a),l=J.find(m=>m.product===c),d=a.getElementsByClassName("tecido_color");if(t.forEach(m=>re(m)),D(a,i.tecido),e.forEach(m=>{m!==a&&$(m)}),l){for(let m=0;m<d.length;m++)d.item(m).id===`${l.color}`&&ne(d.item(m));p==="tecido"&&E(i.tecido,l.color),p==="calha"&&ie(l.color)}else d.length>0&&ne(d[0]),p==="tecido"&&o!==""&&E(i.tecido,`${o}`),p==="calha"&&o!==""&&ie(o);v()&&g(!0)})})},ut=()=>{let e=document.querySelectorAll(".tecido_color");e.forEach(t=>{t.addEventListener("click",a=>{let c=a.currentTarget,o=c&&c.id;ne(c),e.forEach(y=>{y!==c&&re(y)});let l=o?o.split("-")[0]:"",d=J.find(y=>y.product===l);d?d.color=`${o}`:J.push({product:l,color:`${o}`});let m=c.parentElement.parentElement.parentElement.parentElement.getElementsByClassName("tecido_image")[0];for(let y=0;y<e.length;y++)if(e[y].getAttribute("id")===o){let P=e[y].querySelector(".source");P?m.setAttribute("src",P.getAttribute("src")):m.setAttribute("src",e[y].getElementsByTagName("img")[0].getAttribute("src")),m.setAttribute("srcset","");break}return p==="calha"&&o!==""?ie(o):p==="tecido"&&o!==""?E(i.tecido,o):console.log("No color was stored")})})},mt=()=>{let e=document.querySelectorAll("[id^='tipo-card']");e.forEach(t=>{t.addEventListener("click",()=>{D(t,i.tipo),e.forEach(a=>{a!==t&&$(a)}),E(i.tipo,t.getElementsByTagName("h1")[0].textContent),v()&&g(!0)})})},ht=()=>{z.addEventListener("change",function(e){E(i.bainha,z.checked)})},pt=()=>{N?.addEventListener("change",e=>{(N?.checked===!0||M?.checked===!0)&&(be("Parede"),v()&&g(!0))}),M?.addEventListener("change",e=>{(N?.checked===!0||M?.checked===!0)&&(be("Tecto"),v()&&g(!0))})},ft=()=>{C?.addEventListener("input",e=>{C?.value===""||b?.value===""||(v()&&E(i.medidas,`${C?.value} X ${b?.value}`),C?.value!==""&&b?.value!==""&&(v()?g(!0):g(!1)))}),b?.addEventListener("input",e=>{C?.value===""||b?.value===""||(v()&&E(i.medidas,`${C?.value} X ${b?.value}`),C?.value!==""&&b?.value!==""&&(v()?g(!0):g(!1)))})},Et=()=>{X.addEventListener("change",function(e){E(i.correcao,X.checked)})},gt=()=>{V.addEventListener("change",function(e){E(i.instalacao,V.checked)})},yt=()=>{Object.keys(r).forEach(e=>{r[e].addEventListener("click",()=>{tt(e)})})},Ct=()=>{Object.keys(I).forEach(e=>{I[e].addEventListener("click",()=>{e==="correcao"||e==="estoreCorrecao"||ke(e)})})},Pe=e=>{e.button.addEventListener("click",()=>{Ie(e)})},bt=()=>{Te.addEventListener("click",async()=>{n.nome=oe.value,n.email=se.value,n.contacto=$e.checked;let e=await it();await Ot(n.nome,n.email,n.contacto,e)})},vt=()=>{Oe.addEventListener("click",je)},xt=()=>{Ae.addEventListener("click",()=>{Ne.style.display="none",Fe.style.display="flex"})},Bt=()=>{R.addEventListener("click",ot)},It=e=>{let t=f.usedWidths.find(a=>e.tipo===a.name);return t?(e.medidas?parseInt(e.medidas.split(" X ")[0]):0)*t.widthRatio+f.bainhaPrice.widthMargin:0},kt=(e,t)=>{let a=e.medidas.split(" X ")[0],c=0,o=0,l=Re(e);return e.inicio==="Cortina"&&(c=l.product*(t/100),o=l.calha),e.inicio==="Estore"&&(c=l.product),{product:c,calha:o}},Pt=(e,t)=>{if(e.inicio==="Estore")return 0;let a=f.manufacturingPrices.find(c=>e.tipo===c.name);return a?e.tecido.startsWith("101")?a.blackout*(t/100):(e.tecido.startsWith("120")||e.tecido.startsWith("122"))&&(e.tipo==="Ondas"||e.tipo==="Franzido")?a.alinhado*(t/100):a.normal*(t/100):0},Lt=(e,t)=>e.inicio==="Cortina"&&(e.tecido.startsWith("120")||e.tecido.startsWith("122"))||e.inicio==="Estore"?0:e.bainha?f.bainhaPrice.price*(t/100):0,qt=e=>e.correcao?f.measuresCheckPrice:0,Wt=e=>{if(!h[0].instalacao)return 0;let t=0,a=parseInt(e.medidas.split(" X ")[0]),c=f.instalation.find(o=>a<=o.maxWidth);return c&&(t=c.price),c&&e.inicio==="Cortina"&&e.calha.startsWith("9500")&&(t*=2),t||0},St=e=>{let t=It(e),a=kt(e,t),c=Pt(e,t),o=Lt(e,t),l=Wt(e),d=a.product+c+o+a.calha+l;return e.totalPrice=d,{usedWidth:t,productPrice:a.product,manufacturingPrice:c,bainhaPrice:o,calhaPrice:a.calha,instalationPrice:l,windowTotal:d}},$t=e=>{let t=e.indexOf("@");return t>0&&t<e.length-1},Nt=e=>new Promise((t,a)=>{let c=new FileReader;c.onloadend=()=>t(c.result),c.onerror=a,c.readAsDataURL(e)}),Ft=()=>{q.textContent="",T.textContent="",Ce.textContent="",q.classList.remove("u-text-main"),T.classList.remove("u-text-main"),Ce.classList.remove("u-text-main")},Ot=async(e,t,a,c)=>{let o=document.getElementById("feedback-div"),l=null,d=!1;Ft(),e.trim()===""&&(q.textContent="Preencher este campo obrigat\xF3rio",q.classList.add("u-text-main"),d=!0);let m=t.trim();if(m===""?(T.textContent="Preencher este campo obrigat\xF3rio",T.classList.add("u-text-main"),d=!0):$t(m)||(T.textContent="Insira um email v\xE1lido",T.classList.add("u-text-main"),d=!0),!d){try{let P=await c;l=await Nt(P)}catch{console.error("Failed to load PDF"),l=null}let y={name:e,email:t,check:a,file:l,to_company_email:"general@brightweb.tech",to_user_email:t,reply_to:"general@brightweb.tech"};emailjs.send("service_test","template_quote",y).then(function(P){console.log("SUCCESS!",P.status,P.text),fe.style.display="none",o.textContent="Obrigado pelo seu contacto!"},function(P){console.log("FAILED...",P),fe.style.display="none",o.textContent="Oops! Algo correu mal!"})}},jt=()=>{let e=125;for(let t=0;t<5;t++)e=125+t*125,h.push({inicio:"Cortina",tecido:"101015-003",tipo:"Ondas",medidas:`${e} X 250`,correcao:t%2!==0,calha:"5000-Branco",instalacao:t%2===0})},Ut=()=>{h.push({inicio:"Cortina",tecido:"120100-008",tipo:"Franzido",medidas:"200 X 250",correcao:!0,calha:"5000-B",instalacao:!0})},Zt=()=>{let e=[{inicio:"Cortina",tecido:"120100-008",tipo:"Ondas",bainha:!0,medidas:"285 X 150",correcao:!0,calha:"5000-B",suporte:"Parede",instalacao:!0},{inicio:"Cortina",tecido:"120100-008",tipo:"Ondas",bainha:!0,medidas:"240 X 268",correcao:!0,calha:"5000-B",suporte:"Parede",instalacao:!0},{inicio:"Cortina",tecido:"120100-008",tipo:"Ondas",bainha:!0,medidas:"285 X 268",correcao:!0,calha:"5000-B",suporte:"Parede",instalacao:!0},{inicio:"Cortina",tecido:"120100-008",tipo:"Ondas",bainha:!0,medidas:"280 X 268",correcao:!0,calha:"5000-B",suporte:"Parede",instalacao:!0},{inicio:"Cortina",tecido:"120100-008",tipo:"Ondas",bainha:!0,medidas:"285 X 268",correcao:!0,calha:"5000-B",suporte:"Parede",instalacao:!0}];se.value="ritabreu@test.pt",oe.value="Rita Abreu",h.push(...e)},Jt=()=>{let e=[{inicio:"Cortina",tecido:"118060-024",tipo:"Ondas",bainha:!0,medidas:"285 X 150",correcao:!0,calha:"5000-B",suporte:"Parede",instalacao:!0},{inicio:"Cortina",tecido:"118060-024",tipo:"Ondas",bainha:!0,medidas:"348 X 268",correcao:!0,calha:"5000-B",suporte:"Parede",instalacao:!0},{inicio:"Cortina",tecido:"118060-024",tipo:"Ondas",bainha:!0,medidas:"240 X 268",correcao:!0,calha:"5000-B",suporte:"Parede",instalacao:!0},{inicio:"Cortina",tecido:"118060-024",tipo:"Ondas",bainha:!0,medidas:"285 X 268",correcao:!0,calha:"5000-B",suporte:"Parede",instalacao:!0},{inicio:"Cortina",tecido:"118060-024",tipo:"Ondas",bainha:!0,medidas:"280 X 268",correcao:!0,calha:"5000-B",suporte:"Parede",instalacao:!0},{inicio:"Cortina",tecido:"118060-024",tipo:"Ondas",bainha:!0,medidas:"285 X 268",correcao:!0,calha:"5000-B",suporte:"Parede",instalacao:!0}];se.value="ritabreu@test.pt",oe.value="Rita Abreu",h.push(...e)},Kt=()=>{let e=[{inicio:"Cortina",tecido:"120100-008",tipo:"Ondas",medidas:"360 X 150",correcao:!1,calha:"5000-B",instalacao:!1}];h.push(...e)},Gt=()=>{let e=[{inicio:"Cortina",tecido:"120100-008",tipo:"Ondas",medidas:"350 X 240",correcao:!0,calha:"5000-B",instalacao:!0}];h.push(...e)};Ve()});})();
